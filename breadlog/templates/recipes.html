{% extends 'base.html' %}

{% block script %}
<script type='text/javascript' src="../static/js/display_recipe.js"></script>
{% endblock %}


{% block header %} 
{% if current_user.is_authenticated %} 
    <div class="content-title">
        <h1><a class="title" href="{{ url_for('index') }}">BREAD EXPERIMENT LOG</a></h1>
        <br>
        <h4>Welcome back, {{ current_user.email }}</h4>
    </div> 
    {% endif %}
{% endblock %}

{% block body %}
<div class="row">
    <!--Sidebar of existing recipes-->
    <div class="col-4">
        <form method="POST" action=""> <!--action="" means post to the same route we're on-->
            {{ form.hidden_tag() }} <!--add a CSRF token-->
            <fieldset>
                <div>
                    {{ form.recipe_name.label(class="") }}<span></span>
                    {{ form.recipe_name(class="")}}
                    {{ form.submit(class="call-to-action-small") }}
                </div>
            </fieldset>
        </form>
        <br>
        <div class="box-container">
            {% if recipes|length < 1 %}
            <h4>No recipes yet. Try creating a new one.</h4> 
            {% else %}
            <div class="box-header">
                <h3 class="table-header">RECIPE BOX</h3>
            </div>
            <br>
            <div class="box">
                {% for recipe in recipes %}
                    <div class="box-recipe">
                        <img src="static/images/breadlist-1.jpg">
                        <button data-name="{{ recipe.id }}">{{ recipe.name }}</button>
                    </div>
                {% endfor %}
            </div>
            {% endif %}
        </div>
    </div>
    <!--On the right we'll have create new recipe + space to load existing recipe-->
    <div class="col-8">
        <div class="col-8">
            <div id="placeholder"class="placeholder-show">
                {% if recipes | length < 1 %}
                <p>No recipes yet, create one to start</p>
                {% else %}
                <!--Show information for the first recipe-->
                <h1>{{ recipes[0].name }}</h1><span></span>
                <a class="title-edit" href="{{ url_for('edit_recipe', recipe_id=recipes[0].id) }}"><i class="fa fa-edit"></i></a>
                <a class="title-edit" href="{{ url_for('delete_recipe', recipe_id=recipes[0].id) }}"><i class="fa fa-trash"></i></a>
                <hr>
                <p>Total time: {{ hours }} hours {{ minutes }} minutes</p>
                <h4>Ingredients</h4>
                <p>PLACEHOLDER FOR TOTAL INGREDIENTS LIST</p>
                {% for step in recipes[0].steps %}
                <h4>Step {{ step.step_number }}:  {{ step.hours }} h {{ step.minutes }} min</h4>
                <p>START TIMER</p>
                <p>{{ step.notes }}</p>
                {% endfor %}
                {% endif %}
            </div>
            <div id="requested-recipe" class="placeholder-hide">
                <h1 id="recipe-name"></h1>
                <hr>
                <p id="recipe-min"></p>
                <h4>Ingredients</h4>
                <p>PLACEHOLDER FOR TOTAL INGREDIENTS LIST</p>
                <div id="steps"></div>
            </div>
    </div>
</div>
{% endblock %} 
